#!/bin/bash
# rapids-s3-path
#
# Calls _rapids-path and prepends the s3://rapids-downloads/ string
#
# A utility script that examines environment variables provided
# by GitHub Actions to print out an S3 path where the expected artifact
# should be.
#
# The output format should be one of the following:
#
## For PR builds:
## s3://rapids-downloads/ci/<REPO_NAME>/pull-request/<PR_NUMBER>/<SHORT_HASH>/

## For branch builds:
## s3://rapids-downloads/ci/<REPO_NAME>/branch/<BRANCH_NAME>/<SHORT_HASH>/

## For nightly builds:
## s3://rapids-downloads/nightly/<REPO_NAME>/<DATE>/<SHORT_HASH>/
source _rapids-path
export RAPIDS_SCRIPT_NAME="rapids-s3-path"

RAPIDS_DOWNLOADS_BUCKET="${RAPIDS_DOWNLOADS_BUCKET:-rapids-downloads}"

s3_path="s3://${RAPIDS_DOWNLOADS_BUCKET}/${uri_path}"

echo -n "${s3_path}"
